"""
На IT-конференции присутствовали студенты из разных вузов со всей страны. 
Список студентов представлен в таблице. В колонке «Вуз» записаны числа — id учебного заведения. 
Тимофей предложил Саше выяснить, из каких вузов на конференцию пришло больше всего учащихся. 
Ребята решили выяснить, из каких К вузов присутствует больше всего гостей.
Формат ввода
В первой строке записан список id вузов длиной не больше 10100. 
Каждое из чисел находится в диапазоне от 0 до 10000. Во второй строке записано одно число - параметр к.
Формат вывода
Выведите к чисел (id вуза) через пробел, отсортированные по убыванию, начиная от максимального количества гостей от вуза на конференции.

Пример 1

Ввод
1 2 3 1 2 3 4
3

Вывод
1 2 3

Пример 2
Ввод
1 1 1 2 2 3
Вывод
1

Примечания
В тестовых данных нет кейсов, когда вузы с одинаковым количеством студентов находятся на границе к. 
Например, дан массив 1 1 2 2 и к = 1. 
Если более одного вуза имеет одно и то же количество учащихся, и они входят в топ к, то выводить их id нужно в порядке возрастания.
"""

# Реализая получилась по памяти O(n), а по времени O(n+k)

def count_universities(universities, k):
    university_counts = {}
    for university in universities:
        university_counts[university] = university_counts.get(university, 0) + 1

    sorted_universities = sorted(university_counts.items(), key=lambda x: (-x[1], x[0]))

    return [university for university, count in sorted_universities[:k]]

def main():
    try:
        universities = list(map(int, input("Введите список id вузов: ").split()))
        k = int(input("Введите количество вузов k: "))

        if len(universities) > 10100:
            print("Ошибка: список id вузов не должен превышать 10100 элементов.")
            return
        
        if any(num < 0 or num > 10000 for num in universities):
            print("Ошибка: каждое число в списке id вузов должно быть в диапазоне от 0 до 10000.")
            return

        top_k_universities = count_universities(universities, k)
        print("IDs вузов с максимальным числом учащихся:")
        print(' '.join(map(str, top_k_universities)))
    except ValueError:
        print("Ошибка ввода: некорректные значения id вузов или параметра k.")

if __name__ == "__main__":
    main()